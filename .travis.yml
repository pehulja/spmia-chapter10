language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
sudo: required
services:
- docker
notifications:
  email:
  - pehulja@gmail.com
  on_success: always
  on_failure: always
branches:
  only:
  - master
before_install:
- gem install travis -v 1.8.8 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=chapter10-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
- export CONTAINER_IP=13.59.162.29
- export PLATFORM_TEST_NAME="chapter10-platform-tests"
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_services.sh
- sh travis_scripts/deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
env:
  global:
  - secure: NrbUWidmJOIHv/zRr0zkoBxvyuxYkEB6Uct8k1cuNFZ/J4ZI08lXw1IULtMgEOeFdVsW1WBXz/hogDmOLZ6hIZIWuNZOzwkK1aoVMt+MhvgSdPyicph61vvWkgU2FpdNBSOKDUu+ZHdkdXlFO6gLxPNoysQm//DZAD3jGEH8BK16wocGU+8lM+Qla4J1B17K79Acp+HTU32+Qq39/h9fTrvlqjG9Gu8Qk9Xoxq+N9Ekt28fKZsHyUGae5qf3034m3uzAmNeAXuluHNgWhU5SvoWhw3rkVJL1i4xJEYPBnHJQ1K5+XpGZFrupcmS8CFT1PlgmeRrJXT1Xp6NSsRiI/zv9XSr0vnoPSKvUYRtH0qspMd/klZdsMfCMIz7qLiPmFGexJtKCFl0K3ngM6wInUAqcQaYhMIqcS8IQjZeMbeJWw5XPx1Gefa3dJGmgyVeQ2OJfbiQO6VYZDOzNrdnCgNxOXAOfEFqXGQDJnEcOVHHj/93pl84xfqa2CfFt7D/3JSSQKUrMeWUDHbQ5QCwZjESnbUmB5pxDa3fTqVd1zcA2aBQtCsmzIlYZBPN32LsXNswM/BbDhgOzIBO217Ija01NzOkqaSUelqpe0WomQGYVjMtQGghlyB0D3xABSTY3pw3bcY/NwDo83ff3uFQyyGhM+pF3/pDvoTjQedkbAjc=
  - secure: D2wR7MqKzXiR/Ws1S51H7XKtbHSekan98bTMmbq9Kl6KVQf42b0FgkLB0FIx9aFccJAyJ92CcT8lftWDkCcAe0x2KkRtCSkZ0LvcgO/vMzqJqiZqoWU4KIx5KLeGbBte/HO61ypwTZ79uDzbNcMknh6UPJNHqCtAwXpJMNOsWeNSYj9RoSij5OylSMLAee9my0IyR/aYU/pqNXirobs0LpU1QGn3A7S8ELOYg7mDkwGGS17pqsvZv1EAic9lahjuq9C4y1DDNn1KE0V1aFEh2OjJVJ5NmJdAobpsaF06I1o3IPgIBEDc7dcTkTusVJqullJ5XSmB5edjJgbX9RHVYOd2ycX1JqN+2/LuxKvmweY/2xPIAvJxwtgqdd5TK9vU6yIMriFfCITdbH9zCqIgeOmo9upJW1KZqKTcsyitNySkV86BVYZLfzm6UAXZLoYnrp9Y4vyK4LJ5D4DFMJM9NaupFIsXSoPPpUqXu7K5gXkbftoeTv9exL6l85HiEJ8RYvURpriWfkb1d7K+HP/6i7qKI28gNcb2VWyoDyufGuJmTEOmGzVJK9ACwnVoW/xX06Tqe0Eq8UBgzyyAGl9orcHslmm6yCcU6QQX9SanNoAYdl3L1HGg80JIwAfOVmMWeZKk3NsFk0HGknRI7XrG65sriZyWgb24kx1n2rxKRrg=
  - secure: KtL4b5T68K5/AIpXmQGXoTar2l5xm7CERMcTw9ZnaIrf4WLOIXUfOESTufIfB9gezERuTl1/vEwT0vamD0JRwTbt0HPE2N9z1qv1dK60tohulNHM1fP7pQ715BYosZcl+QWOb69FMx6du3zIT2eJ5Xh8rQvl0qPwkNPiHU76K3s11F6hw2TImXCw1BSNZ6Dig4d3im+uVLONRZVVYK4jVfs7Khn+vWbc3fvI5M2SBflB2tNJK7TxPZZFjoLsVi74KAvKKsKBrE1Dr/PxD2JQPPBS6+5I1yL+p8L4dPvkKSuYiKfRTriV4pmPM1MTEWG5iitMgMkJ/Ja6bd7mGmsi50ZNQ7cVgjiU3g+CsmSNKtT6MXazO8R6KMIwGyg7W5ACe9z/9Hqh//5G47tSHAR7jfqquhwyjSnsGeoaHC8VgcgTLU1yZWnstWW4ts2ErSeuFQDmnh8wQuqyMTyWmnV/UAkL79SSE4ezh4yuSjD4bCoA42xnGIMQ48wOPlLLr+6rmutsmCPwEeTQmayoOmBY70g2+t/CDpPZS8lw7IfQluG0iM2CcgMJqVChuluEzkNT2Fo/r1cftJh8OLJZy1B24nZuOmN2YfAlSKevyhw/WdSyf9iFbuq5VLopqac1gVwfOqRfqN7IymQWS3C9wg7PfB9dCkMkbX1CFIpFuvjbV04=
  - secure: ktdwh+s1apdUUaJufkkoRBuRddUXiFcOnTDza734vpMBGwJpQHLZ+exc6cGb6XDmXif0R5dlskbKLfNm7xO8tewjWJ6Qr2/d3iVCYh7276DSeuHELiJRwB4eJ6Qz2fxMhoyd/ywTeuSyV0SSxAIyEM69Ci3DK4TMOe6XTZP5+VHnAkuoM8pp+/7lKhXe9vXWOSo882s8AIVrBIvp6JgKMts0bDPMPQ5ogXRmn73i14YzSyeJf8VbKOQhLA4/D3DOMmM24n+kFOiMtn9sQvQjxOesCEJNo0CpG0NwNxiKfem/wjq3VBM+mlbvv+lV+QpCHpcPjc+5gg0d5XmEALb9rpr04iFhT45PtkXjwCkX3ERTyoTSjdYha/gBbp3iY6bjY18yK31c2FbwfyLEOSkRH5p3D6WfOUsf07AF3KNvpjEmlGXM9dwj5VnzMbwJxR8aigzqixheZInmd58Mgc1FF0Z2yF4K7SlfWf0G/syNn1ijS0TaEuTDZM9pV9WfMgO41EcqIET/DH4WfqPbEiIpux4w5Y15GzcAVqzPcXLktx/4UiKatBuzGBqNpMtdd/uNol+3VroOuouhwuOIoYNvX+xCwQUq7I+lejRyHIf2JDWPPH4efM/xQi5MW+i3trXyCJlMnxxSyP1RkxXkvwUCDIw02eaG83Rsa/OfDVoGqhc=
  - secure: a0gWBAekv2Nvum959AFGo3yts2qELlteCQzZjzkBFxAFT3ROOUw3d0MTtmnWsrHJfacYRIO4N9b2dTp+Is781eAjFT8u+48ses2hWgyVECUf5qUkQGhc27zSLhXaoJ2FEcjJgizNPhU0nx0PWFjhj6Q1z6dnrBq0T/lBLQ2Dbq+YpopHMx0aWlbfYR1mlDM28SOlDNUisCqsxkvcyos7HIAFgFnBgKZDWT6Df65oW/J5cjHl/OP/+9BNW/MDSucUEcoTYy4HMX/fGN7n8X/CajSwiUvipaMLXMCi0EztP+4yp+x01Z1dc6WwKJv7kl8DSVrWKzHaZMLKwDjtApxT2Dq2cYPzm1+t+CbPD1C1H09YCqldUZi0es5j8PGpx6mnAPjSqN6WtVsHIrmi51TikI0SNl0jktsJ3+WHxLI4SZ8RSDZedYYNz+ITyzPeGoMPDe9XOj4HmItUcU6wg2+zjLAA7vKfEjjDBRYTOmzmB53gog3XdgkvUyreTG/I9YAgFGpLaim7Cou11N6HUv7hkPjfJnGWNo35lZ9iPnHLxzFEXDTg6GBljVQLgVJtNNy+eaUgYgSLnajgn9INCWHYq2hO/g3iPbOl19duFf7S75VXs4oXpWAlQbj8mXMw/wnYh/S0IcF1/fiNfEwCpPhlFSY1XM6YWfIOz6yGaSnMzB4=
